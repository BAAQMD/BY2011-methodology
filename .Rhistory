##------ [welcome] Today is Sat Feb 22 17:32:42 2020 ------##
##------ [welcome] This is Ingres v2019.6.25 (2019-10-18 13:16:10) ------##
##------ [welcome] This is DataBank v2020.2.12 (2020-02-12 21:37:22) ------##
##------ [welcome] This is inventory v2020.2.6 (2020-02-06 22:28:25) ------##
BY2011_category_hierarchy %>% filter_categories(79:80) %>% drop_vars(cat_h1, cat_h2)
library(BY2011)
BY2011_category_hierarchy %>% filter_categories(79:80) %>% drop_vars(cat_h1, cat_h2)
source("chapter_setup.R")
THESE_CATEGORIES <- c(
"#79 Aviation Fuel",
"#80 Jet Fuel")
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
THESE_CATEGORIES <- c(
"#79 Aviation Fuel" = 79,
"#80 Jet Fuel" = 80)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_category_hierarchy %>% filter_categories(81:83) %>% drop_vars(cat_h1, cat_h2)
THESE_CATEGORIES <- c(
"#81 Recreational Boat Fueling",
"#82 Ships & Tugboats Fueling",
"#83 Ferry & Fishing Boats Fueling")
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
THESE_CATEGORIES <- c(
"#81 Recreational Boat Fueling" = 81,
"#82 Ships & Tugboats Fueling" = 82,
"#83 Ferry & Fishing Boats Fueling" = 83)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
THESE_CATEGORIES <- c(
"#939 Other Fueling" = 939)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_category_hierarchy %>% filter_categories(92, 1577) %>% drop_vars(cat_h1, cat_h2)
THESE_CATEGORIES <- c(
"#92 Sterilizers (Point)" = 92,
"#1597 Sterilizers (Area)" = 1597)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
THESE_CATEGORIES <- c(
"#92 Sterilizers (Point)" = 92,
"#1597 Sterilizers (Area)" = 1597)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES)
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
tabulate_BY2011_emission_factors(
pollutants = BY2011_POLLUTANTS)
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES)
THESE_CATEGORIES <- c(
"#283 Space Heating" = 283,
"#284 Water Heating" = 284,
"#285 Cooking" = 285)
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
tabulate_BY2011_emission_factors(
pollutants = c(
BY2011_POLLUTANTS,
"CO2", "CH4", "N2O"))
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = category)
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
filter_years(
CY(2011)) %>%
tabulate_BY2011_emission_factors(
pollutants = c(
BY2011_POLLUTANTS,
"CO2", "CH4", "N2O"))
RY(2011) %>% filter_categories(92)
RY(2011) %>% point_source_emissions() %>% filter_categories(92)
RY(2011) %>% point_source_emissions() %>% filter_categories(92) %>% pivot_table(rows = c("fac_id"))
RY(2011) %>% point_source_emissions() %>% filter_categories(92) %>% with_facility_name() %>% pivot_table(rows = c("fac_id", "fac_+name"))
RY(2011) %>% point_source_emissions() %>% filter_categories(92) %>% with_facility_name() %>% pivot_table(rows = c("fac_id", "fac_name"))
BY2011_POLLUTANTS
source("chapter_setup.R")
##------ [welcome] Today is Mon Feb 24 13:59:18 2020 ------##
##------ [welcome] This is Ingres v2019.6.25 (2019-10-18 13:16:10) ------##
##------ [welcome] This is DataBank v2020.2.12 (2020-02-12 21:37:22) ------##
##------ [welcome] This is inventory v2020.2.6 (2020-02-06 22:28:25) ------##
THESE_CATEGORIES <- c(
"#307 NG Combustion (Point, Misc)" = 307,
"#1590 NG Combustion (Industrial)" = 1590,
"#1591 NG Combustion (Commercial)" = 1591,
"#968 NG Combustion (Glass Furnace)" = 968)
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
tabulate_BY2011_emission_factors(
pollutants = c(
BY2011_POLLUTANTS,
"CO2", "CH4", "N2O"))
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
tabulate_BY2011_emission_factors(
pollutants = union(
BY2011_POLLUTANTS,
c("CO2", "CH4", "N2O"))
BY2011_annual_area_source_emission_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
tabulate_BY2011_emission_factors(
pollutants = union(
BY2011_POLLUTANTS,
c("CO2", "CH4", "N2O")))
rm(list = ls())
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
BY2011_YEAR_LIMITS <-
CY(1990, 2030)
BY2011::BY2011_annual_emission_data
BY2011::BY2011_annual_emission_data %>% filter(cat_id == 1930)
load_all()
source("chapter_setup.R")
##------ [welcome] Today is Tue Feb 25 10:04:01 2020 ------##
##------ [welcome] This is Ingres v2019.6.25 (2019-10-18 13:16:10) ------##
##------ [welcome] This is DataBank v2020.2.12 (2020-02-12 21:37:22) ------##
##------ [welcome] This is inventory v2020.2.6 (2020-02-06 22:28:25) ------##
?group_rows
BY2011::BY2011_annual_emission_data %>% spread(year, ems_qty)
BY2011::BY2011_annual_emission_data %>% filter_categories(24)
BY2011::BY2011_annual_emission_data %>% filter_categories(24) %>% filter_pollutants("NOx")
BY2011::BY2011_annual_emission_data %>% filter_categories(24) %>% filter_pollutants("NOx") %>% print(n = Inf)
BY2011::BY2011_annual_emission_data %>% filter(cat_id %in% BY2011_sets$`Area sources`) %>% spread(year, ems_qty)
BY2011::BY2011_annual_emission_data %>% filter(cat_id %in% BY2011_sets$`Area sources`) %>% spread(year, ems_qty) %>% filter_at(vars(starts_with("CY")), any_vars(is.na(.)))
BY2011::BY2011_annual_emission_data %>% filter(cat_id %in% BY2011_sets$`Area sources`) %>% spread(year, ems_qty) %>% filter_at(vars(starts_with("CY")), any_vars(is.na(.))) %>% View()
BY2011::BY2011_annual_emission_data
##------ [welcome] Today is Tue Feb 25 13:51:51 2020 ------##
##------ [welcome] This is DataBank v2020.2.12 (2020-02-12 21:37:22) ------##
DataBank::with_point_source_throughputs
DB_point_source_throughputs
DataBank::DB_point_source_throughputs
DataBank:::DB_point_source_throughputs_
DataBank:::DB_point_source_throughputs__
decode_tput_unit
DataBank:::decode_tput_unit
DB_MATERIAL_UNITS
DataBank::DB_MATERIAL_UNITS
DataBank:::DB_point_source_throughputs__
source("chapter_setup.R")
##------ [welcome] This is Ingres v2019.6.25 (2019-10-18 13:16:10) ------##
##------ [welcome] This is inventory v2020.2.6 (2020-02-06 22:28:25) ------##
BY2011_category_hierarchy %>% filter_categories(262)
THESE_CATEGORIES <- c(
"#2224 Vacuum Truck" = 2224)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant,
flag_years = CY(2011, 2013))
source("chapter_setup.R")
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant,
flag_years = CY(2011, 2013))
THESE_CATEGORIES <- c(
"#2224 Vacuum Truck" = 2224)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant,
flag_years = CY(2011, 2013))
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant,
flag_years = CY(2011, 2014))
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant,
flag_years = CY(2011, 2030))
THESE_CATEGORIES <- c(
"#282 Other Organic Compounds Evaporation" = 282)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_category_hierarchy %>% filter_categories(117, 1901, 118)
BY2011_category_hierarchy %>% filter_categories(117, 1901, 118) %>% drop_vars(cat_h1, cat_h2)
THESE_CATEGORIES <- c(
"#117 Solvent Base" = 117,
"#118 Water Base" = 118,
"#1901 Solvent Base (Area)" = 1901)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
BY2011_category_hierarchy %>% filter_categories(105:107, 1912:1913) %>% drop_vars(cat_h1, cat_h2)
THESE_CATEGORIES <- c(
"#105 Perchloroethylene" = 105,
"#106 Other Synthetic Solvents" = 106,
"#107 Non-Halogenated Pet. Solv." = 107,
"#1912 Perchloroethylene (Area)" = 1912,
"#1913 Non-Halogenated Pet.Solv. (Area/Registered)" = 1913)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
perc_reduction_data <-
tibble(
year = CY(2008:2023),
reduced = 0.01 * c(18.57, 18.57, 18.57, 1.43, 4.90, 3.88, 8.16, 6.73, 8.98, 4.90, 1.43, 1.63, 0.82, 0.41, 0.20, 0.82),
cum_reduced = cumprod(reduced))
perc_reduction_data
perc_reduction_data <-
tibble(
year = CY(2008:2023),
reduced = 0.01 * c(18.57, 18.57, 18.57, 1.43, 4.90, 3.88, 8.16, 6.73, 8.98, 4.90, 1.43, 1.63, 0.82, 0.41, 0.20, 0.82),
cum_reduced = cumprod((1 - reduced)))
perc_reduction_data
perc_reduction_data <-
tibble(
year = CY(2008:2023),
reduced = 0.01 * c(18.57, 18.57, 18.57, 1.43, 4.90, 3.88, 8.16, 6.73, 8.98, 4.90, 1.43, 1.63, 0.82, 0.41, 0.20, 0.82),
cum_reduced = cumsum(reduced))
perc_reduction_data
perc_data <-
tibble(
year = CY(2008:2023),
reduced = 0.01 * c(18.57, 18.57, 18.57, 1.43, 4.90, 3.88, 8.16, 6.73, 8.98, 4.90, 1.43, 1.63, 0.82, 0.41, 0.20, 0.82),
cum_reduced = cumsum(reduced))
kable_data <-
perc_data %>%
mutate_at(
vars(reduced, cum_reduced),
~ formattable::percent(digits = 2)) %>%
rename(
Year = year,
`Reduction`,
`Cumulative`)
perc_data <-
tibble(
year = CY(2008:2023),
reduced = 0.01 * c(18.57, 18.57, 18.57, 1.43, 4.90, 3.88, 8.16, 6.73, 8.98, 4.90, 1.43, 1.63, 0.82, 0.41, 0.20, 0.82),
cum_reduced = cumsum(reduced))
kable_data <-
perc_data %>%
mutate_at(
vars(reduced, cum_reduced),
~ formattable::percent(digits = 2)) %>%
rename(
Year = year,
`Reduction` = reduced,
`Cumulative` = cum_reduced)
perc_data <-
tibble(
year = CY(2008:2023),
reduced = 0.01 * c(18.57, 18.57, 18.57, 1.43, 4.90, 3.88, 8.16, 6.73, 8.98, 4.90, 1.43, 1.63, 0.82, 0.41, 0.20, 0.82),
cum_reduced = cumsum(reduced))
kable_data <-
perc_data %>%
mutate_at(
vars(reduced, cum_reduced),
~ formattable::percent(., digits = 2)) %>%
rename(
Year = year,
`Reduction` = reduced,
`Cumulative` = cum_reduced)
kable_data %>%
kable() %>%
kable_styling(
full_width = FALSE,
bootstrap_options = c(
#"striped",
"condensed"))
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
THESE_CATEGORIES <- c(
"#1618 Asphalt Roofing" = 1618)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_category_hierarchy %>% filter_categories(95:97) %>% drop_vars(cat_h1, cat_h2)
BY2011_category_hierarchy %>% filter_categories(94:97) %>% drop_vars(cat_h1, cat_h2)
THESE_CATEGORIES <- c(
"#94 Rapid-cure Cutback" = 94,
"#95 Road Oils" = 95,
"#96 Hot Mix Asphalt" = 96,
"#97 Emulsified Asphalt" = 97)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_control_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_control_factors_by(
color = pollutant)
(1 - 0.49) * (1 - 0.553)
THESE_CATEGORIES <- c(
"#54 Other Industrial/Commercial" = 54)
BY2011_annual_emission_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_emissions_by(
fill = category)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
THESE_CATEGORIES <- c(
"#55 Cone Roof" = 55,
"#56 External Floating Roof" = 56,
"#57 Internal Floating Roof" = 57,
"#58 Other Types" = 58,
"#84 Cone Roof" = 84,
"#85 Other Types" = 85,
"#940 Tank Cleaning" = 940,
"#1902 Cone Roof (Area)" = 1902,
"#1903 Other Types (Area)" = 1903)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES[1]) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES[1:2]) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES[1:5]) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES[1:8]) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES[1:9]) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
BY2011_annual_growth_factor_data %>%
filter_categories(
THESE_CATEGORIES[8:9]) %>%
chart_BY2011_annual_growth_factors_by(
color = cnty_abbr)
RY(2008:2012) %>% DB_point_source_PONSCO_emissions() %>% filter_categories(305)
RY(2008:2012) %>% DB_point_source_PONSCO_emissions() %>% filter_categories(305) %>% pivot_table(rows = "cat_id")
RY(2008:2012) %>% DB_point_source_PONSCO_emissions() %>% filter_categories(305) %>% filter_pollutants("NOx") %>% pivot_table(rows = "cat_id")
RY(2008:2012) %>% DB_point_source_PONSCO_emissions() %>% filter_categories(305) %>% filter_pollutants("NOx") %>% with_facility_name() %>% pivot_table(rows = c("fac_id", "fac_name", "src_id", "src_code"))
